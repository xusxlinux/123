
ProjectVolume

Secret

ConfigMap

DownloadAPI


``` yaml
[root@hdss7-200 k8s_02]# cat pod-secret.yaml

apiVersion: v1
# 这个资源类型可以直接热加载
kind: Secret
metadata:
  name: dbpass
# Opaque不透明
type: Opaque
data:
  # base64加密
  username: a3ViZXJuZXRlcw==
  passwd:  a3ViZXJuZXRlcw==
---
apiVersion: v1
kind: Pod
metadata:
  name: pod-secret
spec:
  containers:
  - name: tomcat
    image: xusx/tomcat:8.0.22
    ports:
    - containerPort: 8080
    volumeMounts:
    - name: db-secret
      # 容器内挂载的目录
      mountPath: /db-secret
      readOnly: true
  volumes:
  - name: db-secret
    projected:
      sources:
      - secret:
          # secret的名字
          name: dbpass
```

``` shell
[root@hdss7-22 ~]# docker exec -it 8a524d2a5c44 bash

root@pod-secret:/db-secret# cat passwd 
kubernete
root@pod-secret:/db-secret# cat username
kubernete
```


``` yaml
[root@hdss7-200 k8s_02]# vim game.properties 

enemies=aliens
lives=3
enemies.cheat=true
enemies.cheat.level=noGoodRotten
secret.code.passphrase=UUDDLRLRBABAS
secret.code.allowed=true
secret.code.lives=30

```
``` shell
# 创建一个configMap资源类型 名字叫做web-game
[root@hdss7-200 k8s_02]# kubectl create configmap web-game --from-file=game.properties -n test
```
``` yaml
[root@hdss7-200 k8s_02]# vim pod-configmap.yaml 

apiVersion: v1
kind: Pod
metadata:
  name: pod-game
spec:
  containers:
  - name: tomcat
    image: xusx/tomcat:8.0.22
    ports:
    - containerPort: 8080
    volumeMounts:
    - name: game
      mountPath: /etc/config/game
      readOnly: true
  volumes:
  - name: game
    projected:
      sources:
      - configMap:
          name: web-game
```


``` shell
[root@hdss7-200 ~]# docker exec -it 52d11b278973 bash

root@pod-game:/usr/local/tomcat# cat /etc/config/game/game.properties 
enemies=aliens
lives=3
enemies.cheat=true
enemies.cheat.level=noGoodRotten
secret.code.passphrase=UUDDLRLRBABAS
secret.code.allowed=true
secret.code.lives=30
```
